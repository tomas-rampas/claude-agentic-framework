{
  "name": "agent-health-monitor",
  "description": "Monitor agent health and implement automatic recovery mechanisms",
  "version": "2.0",
  "monitors": [
    "rust-expert",
    "csharp-expert",
    "go-expert",
    "java-expert",
    "python-expert",
    "typescript-expert",
    "bash-expert",
    "powershell-expert",
    "database-specialist",
    "frontend-specialist",
    "security-specialist",
    "uiux-specialist",
    "devops-orchestrator",
    "system-architect",
    "comprehensive-analyst",
    "code-review-gatekeeper",
    "technical-docs-writer",
    "product-owner"
  ],

  "health_checks": {
    "activity_monitoring": {
      "check_interval": 30000,
      "inactivity_threshold": 180000,
      "stuck_detection_threshold": 300000,
      "token_usage_monitoring": true,
      "tool_usage_tracking": true
    },

    "performance_monitoring": {
      "response_time_threshold": 120000,
      "memory_usage_threshold": "80%",
      "token_efficiency_threshold": 0.1,
      "task_completion_rate_threshold": 0.8
    },

    "quality_monitoring": {
      "error_rate_threshold": 0.05,
      "timeout_rate_threshold": 0.1,
      "retry_success_rate_threshold": 0.7,
      "coordination_failure_threshold": 0.15
    }
  },

  "health_states": {
    "HEALTHY": {
      "description": "Agent operating normally",
      "action": "CONTINUE_MONITORING",
      "escalation_level": 0
    },
    "DEGRADED": {
      "description": "Agent performance below optimal",
      "action": "INCREASE_MONITORING_FREQUENCY",
      "escalation_level": 1
    },
    "STUCK": {
      "description": "Agent inactive for extended period",
      "action": "TRIGGER_RECOVERY_SEQUENCE",
      "escalation_level": 2
    },
    "FAILED": {
      "description": "Agent unresponsive or critically failed",
      "action": "EMERGENCY_FALLBACK",
      "escalation_level": 3
    }
  },

  "recovery_strategies": {
    "STUCK_AGENT_RECOVERY": {
      "step_1": "SEND_HEALTH_CHECK_PING",
      "step_2": "RETRY_LAST_OPERATION",
      "step_3": "DELEGATE_TO_BACKUP_AGENT",
      "step_4": "PROGRESSIVE_ESCALATION",
      "timeout_per_step": 60000
    },

    "PERFORMANCE_DEGRADATION": {
      "step_1": "REDUCE_TASK_COMPLEXITY",
      "step_2": "ALLOCATE_ADDITIONAL_RESOURCES",
      "step_3": "DELEGATE_SUBTASKS",
      "step_4": "AGENT_REPLACEMENT",
      "adaptive_scaling": true
    },

    "COORDINATION_FAILURE": {
      "step_1": "RESTART_COORDINATION_PROTOCOL",
      "step_2": "SIMPLIFY_WORKFLOW",
      "step_3": "DIRECT_ORCHESTRATOR_INTERVENTION",
      "step_4": "FALLBACK_TO_SINGLE_AGENT",
      "maintain_consistency": true
    }
  },

  "escalation_matrix": {
    "level_0": {
      "action": "LOG_AND_CONTINUE",
      "notification": "NONE",
      "intervention": "AUTOMATIC"
    },
    "level_1": {
      "action": "ADJUST_PARAMETERS",
      "notification": "INTERNAL_LOG",
      "intervention": "AUTOMATIC"
    },
    "level_2": {
      "action": "ACTIVATE_RECOVERY",
      "notification": "ORCHESTRATOR_ALERT",
      "intervention": "GUIDED_AUTOMATIC"
    },
    "level_3": {
      "action": "EMERGENCY_HANDOVER",
      "notification": "IMMEDIATE_ESCALATION",
      "intervention": "ORCHESTRATOR_TAKEOVER"
    }
  },

  "backup_strategies": {
    "rust-expert": {
      "primary_backup": "comprehensive-analyst",
      "secondary_backup": "code-review-gatekeeper",
      "capability_overlap": ["code_creation", "performance_optimization"],
      "handover_protocol": "PRESERVE_CONTEXT"
    },
    "csharp-expert": {
      "primary_backup": "comprehensive-analyst",
      "secondary_backup": "code-review-gatekeeper",
      "capability_overlap": ["code_creation", "azure_integration"],
      "handover_protocol": "PRESERVE_CONTEXT"
    },
    "go-expert": {
      "primary_backup": "comprehensive-analyst",
      "secondary_backup": "code-review-gatekeeper",
      "capability_overlap": ["code_creation", "microservices"],
      "handover_protocol": "PRESERVE_CONTEXT"
    },
    "java-expert": {
      "primary_backup": "comprehensive-analyst",
      "secondary_backup": "code-review-gatekeeper",
      "capability_overlap": ["code_creation", "spring_boot"],
      "handover_protocol": "PRESERVE_CONTEXT"
    },
    "python-expert": {
      "primary_backup": "comprehensive-analyst",
      "secondary_backup": "code-review-gatekeeper",
      "capability_overlap": ["code_creation", "data_processing"],
      "handover_protocol": "PRESERVE_CONTEXT"
    },
    "typescript-expert": {
      "primary_backup": "comprehensive-analyst",
      "secondary_backup": "code-review-gatekeeper",
      "capability_overlap": ["code_creation", "frontend_backend"],
      "handover_protocol": "PRESERVE_CONTEXT"
    },
    "bash-expert": {
      "primary_backup": "devops-orchestrator",
      "secondary_backup": "comprehensive-analyst",
      "capability_overlap": ["automation", "scripting"],
      "handover_protocol": "PRESERVE_CONTEXT"
    },
    "powershell-expert": {
      "primary_backup": "devops-orchestrator",
      "secondary_backup": "comprehensive-analyst",
      "capability_overlap": ["automation", "windows_admin"],
      "handover_protocol": "PRESERVE_CONTEXT"
    },
    "database-specialist": {
      "primary_backup": "system-architect",
      "secondary_backup": "comprehensive-analyst",
      "capability_overlap": ["schema_design", "query_optimization"],
      "handover_protocol": "PRESERVE_DATA_STATE"
    },
    "frontend-specialist": {
      "primary_backup": "typescript-expert",
      "secondary_backup": "uiux-specialist",
      "capability_overlap": ["ui_components", "responsive_design"],
      "handover_protocol": "PRESERVE_UI_STATE"
    },
    "security-specialist": {
      "primary_backup": "comprehensive-analyst",
      "secondary_backup": "code-review-gatekeeper",
      "capability_overlap": ["security_audit", "vulnerability_assessment"],
      "handover_protocol": "PRESERVE_SECURITY_CONTEXT"
    },
    "uiux-specialist": {
      "primary_backup": "frontend-specialist",
      "secondary_backup": "system-architect",
      "capability_overlap": ["design_systems", "accessibility"],
      "handover_protocol": "PRESERVE_DESIGN_STATE"
    },
    "devops-orchestrator": {
      "primary_backup": "bash-expert",
      "secondary_backup": "system-architect",
      "capability_overlap": ["infrastructure", "ci_cd"],
      "handover_protocol": "PRESERVE_INFRASTRUCTURE_STATE"
    },
    "system-architect": {
      "primary_backup": "comprehensive-analyst",
      "secondary_backup": "orchestrator_direct",
      "capability_overlap": ["architecture_design", "technical_specifications"],
      "handover_protocol": "PRESERVE_DESIGN_CONTEXT"
    },
    "comprehensive-analyst": {
      "primary_backup": "code-review-gatekeeper",
      "secondary_backup": "orchestrator_direct",
      "capability_overlap": ["analysis", "investigation"],
      "handover_protocol": "PRESERVE_ANALYSIS_STATE"
    },
    "code-review-gatekeeper": {
      "primary_backup": "comprehensive-analyst",
      "secondary_backup": "orchestrator_direct",
      "capability_overlap": ["quality_validation", "code_review"],
      "handover_protocol": "PRESERVE_REVIEW_STATE"
    },
    "technical-docs-writer": {
      "primary_backup": "comprehensive-analyst",
      "secondary_backup": "orchestrator_direct",
      "capability_overlap": ["documentation", "guides"],
      "handover_protocol": "PRESERVE_DOC_STATE"
    },
    "product-owner": {
      "primary_backup": "system-architect",
      "secondary_backup": "orchestrator_direct",
      "capability_overlap": ["requirements", "user_stories"],
      "handover_protocol": "PRESERVE_REQUIREMENTS_STATE"
    }
  },

  "prevention_mechanisms": {
    "proactive_timeout_management": {
      "early_warning_threshold": 0.8,
      "timeout_prediction": true,
      "automatic_extension": true,
      "graceful_degradation": true
    },

    "resource_optimization": {
      "memory_management": "AUTOMATIC",
      "token_budgeting": "ADAPTIVE",
      "task_prioritization": "DYNAMIC",
      "load_balancing": "ENABLED"
    },

    "coordination_improvement": {
      "communication_protocol": "OPTIMIZED",
      "state_synchronization": "CONTINUOUS",
      "conflict_resolution": "AUTOMATIC",
      "workflow_adaptation": "REAL_TIME"
    }
  },

  "recovery_success_metrics": {
    "recovery_time": "< 60 seconds",
    "data_loss": "ZERO",
    "workflow_continuity": "> 95%",
    "user_experience_impact": "MINIMAL"
  },

  "integration": {
    "coordinates_with": [
      "zero-tolerance-quality",
      "tdd-workflow",
      "agent-coordination",
      "agent-performance-sla"
    ],
    "monitors_hooks": "ALL",
    "provides_feedback_to": "ORCHESTRATOR",
    "automatic_reporting": "ENABLED"
  }
}
